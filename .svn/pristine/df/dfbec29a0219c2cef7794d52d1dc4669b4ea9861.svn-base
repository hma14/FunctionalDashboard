@model  IEnumerable<FunctionalDashboard.Dal.DataEntity.GeneralEventLog>
@using System.Xml.Linq;

<link rel="stylesheet" href="~/Content/popBox.css" type="text/css" />
<script src="~/Scripts/popBox.js" type="text/javascript"></script>
<script src="~/Scripts/Common.js" type="text/javascript"></script>
<script src="~/Scripts/EventsProgramUpass.js" type="text/javascript"></script>
<script src="~/Scripts/KnowledgeBasePopup.js" type="text/javascript"></script>

@if (ViewBag.Message != null)
{
    <p style="color: red;">Error: @ViewBag.Message</p>
}

<h5>XML Data</h5>
<div id="xmldata">

    @if (Model.Any())
    {
        <table class="table">
            <caption class="caption">XML DATA on Category = <span style="color: red">'@Model.First().Category'</span></caption>

            <tr>
                <td class="bold">TaskID</td>
                <td>
                    @Model.First().TaskID
                </td>
            </tr>
            <tr>
                <td class="bold">StateID</td>
                <td>
                    @Model.First().StateID
                </td>
            </tr>
            <tr>
                <td class="bold">ProgramID</td>
                <td>
                    @Model.First().ProgramID
                </td>
            </tr>
            <tr>
                <td class="bold">InstitutionID</td>
                <td>
                    @Model.First().InstitutionID
                </td>
            </tr>
            <tr>
                <td class="bold">Category (<span class="event_id_bold">id</span>)</td>
                <td>
                    @Model.First().Category (<span class="event_id_bold">@Model.First().CategoryID</span>)
                </td>
            </tr>
            <tr>
                <td class="bold">Event (<span class="event_id_bold">id</span>)</td>
                <td>
                    <a href="#" id="event1"  data-id2="@Model.First().Category"      data-id3="@Model.First().CategoryID" 
                                             data-id4="@Model.First().Event"         data-id5="@Model.First().EventID" 
                                             data-id6="@User.Identity.Name"          data-id7="@DateTime.Now"> 
                                            @Model.First().Event (<span class="event_id_bold">@Model.First().EventID</span>)
                    </a>
                </td>
            </tr>
            <tr>
                <td class="bold">GUID</td>
                <td>
                    @Model.First().GUID
                </td>
            </tr>
            <tr>
                <td class="bold">CardSerialNumber</td>
                <td>
                    @Model.First().CardSerialNumber
                </td>
            </tr>

            <tr>
                <td class="bold">URI</td>
                <td>
                    @Model.First().URI
                </td>
            </tr>

            <tr>
                <td class="bold">Process Datetime</td>
                <td>
                    @Model.First().ProcessDatetime
                </td>
            </tr>
            <tr>
                <td class="bold">Process Datetime (Precision In Milliseconds)</td>
                <td>
                   @Model.First().ProcessDatetime.ToString("yyyy-MM-dd HH:mm:ss.fff", System.Globalization.CultureInfo.InvariantCulture)
                </td>
            </tr>
            <tr>
                <td class="bold">Log Level</td>
                <td>
                    @Model.ElementAt(0).Level 
                </td>
            </tr>

            <tr>
                <td class="bold">Error/Info ID</td>
                @if (!String.IsNullOrEmpty(Model.First().ProcessErrorID) && Model.First().ProcessErrorID != "0" && Model.First().ProcessErrorID != "996")
                {
                    <td class="errors">
                        @Model.First().ProcessErrorID
                    </td>
                }
                else
                {
                    <td class="non-error">
                        @Model.First().ProcessErrorID
                    </td>
                }
            </tr>
            <tr>
                <td class="bold">Error/Info Descr</td>
                @if (!String.IsNullOrEmpty(Model.First().ProcessErrorDescr) && Model.First().ProcessErrorID != "0" && Model.First().ProcessErrorID != "996")
                {
                    <td class="errors">
                        @Model.First().ProcessErrorDescr
                    </td>
                }
                else
                {
                    <td class="non-error">
                        @Model.First().ProcessErrorDescr
                    </td>
                }
            </tr>


            @if (!String.IsNullOrEmpty(Model.First().StackTrace))
            {
                <tr>
                    <td class="bold">StackTrace</td>
                    <td class="errors">
                        @Model.First().StackTrace
                    </td>
                </tr>
            }


        </table>
    }

</div>





